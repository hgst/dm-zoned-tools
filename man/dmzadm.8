.\"  Copyright (C) 2016, Western Digital.
.\"  Written by Damien Le Moal <damien.lemoal@wdc.com>
.\"
.TH DMZADM 8
.SH NAME
dmzadm \- manage zoned block device format for use with the dm-zoned device
mapper

.SH SYNOPSIS
.B dmzadm
<
.I operation
>
<
.I zoned-block-device
>
[
.I options
]

.SH DESCRIPTION
.B dmzadm
is used to format, check and repair a zoned block device used with the dm-zoned
device mapper. 
\fIzoned-block-device\fP is the special file corresponding to the target zoned
blocks device (e.g.
\fI/dev/sdXX\fP).
\fIoperation\fP specifies the action to be taken for the device.
.PP
The exit code returned by
.B dmzadm
is 0 on success and 1 on failure.

.SH OPERATIONS

dmzadm allows the following operations.

.TP
.B Format
Write to the zoned block device dm-zoned metadata, whiping clean all data that
was stored on the device.

.TP
.B Check
Check the zoned block device metadata consistency. No repair action is taken.
Errors are not corrected with this operation. For repairing incorrect metadata,
the
\fIRepair\fP operation must be used.

.TP
.B Repair
Check the zoned block device metadata consistency and try to repair any error
detected.

.TP
.B Help
Print a short usage description of dmzadm

.SH OPTIONS

.TP
Options for selecting an operation are:

.TP
.BR \-\-format
Format a zoned block device.

.TP
.BR \-\-check
Check a zoned block device metadata.

.TP
.BR \-\-repair
Check a zoned block device metadata and attempt to repair any error found.

.TP
.BR \-\-help ", " \-h
Print usage help.

.TP
General options:

.TP
.BR \-\-verbose ", " \-v
Verbose output detailing actions taken.

.TP
.BR \-\-vverbose ", " \-vv
Very detailed output of actions taken.

.TP
\fIFormat\fP operation options:

.TP
.BR \-\-seq=<num>
Specify the number of sequential zones to be reserved for reclaim.

.TP
.SH AUTHOR
This version of
.B dmzadm
has been written by Damien Le Moal <damien.lemoal@wdc.com>
and Albert H. Chen <albert.chen@wdc.com>

.SH AVAILABILITY
.B dmzadm
is available from https://github.com/hgst/dm-zoned-tools
.SH SEE ALSO
.BR dmsetup (8)
